(this["webpackJsonpunstable-game"]=this["webpackJsonpunstable-game"]||[]).push([[0],[,,,,,,,function(e,t,n){},,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t),t.default=n.p+"1e08c02ffb091b99fb2facf24618c7f8.mp3"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"ed14d2196c6a0a8bf20a14c8c076ddd8.mp3"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"e50d51ee58c6ec04b8cffdb182707bfa.mp3"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"786120ca73fc6fc78ce66d044b9d37d2.mp3"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"de8730f7f67fb59b3387c7dab07f1b00.mp3"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"2547c50ab2ea29129121bb2e92415d91.mp3"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"2ab3acbb7166e282f2465998f93c1c7e.mp3"},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,c=n(0),s=n.n(c),r=n(8),o=n.n(r),u=(n(14),n(2));n(7),n(15);function i(e){return e>=4.5?a.happy:e>=2.5?a.ok:e>=0?a.neutral:e>=-2.5?a.sad:a.nightmare}!function(e){e.happy="happy",e.ok="ok",e.neutral="neutral",e.sad="sad",e.nightmare="nightmare"}(a||(a={}));var l=s.a.createContext({score:0,lampState:a.neutral,setScore:function(){}}),d=n(9),b=n(1),f={currentPhraseIndex:0,setNextPhrase:function(){},getQuestion:function(){return"string"},getAnswers:function(){return[]}},j=[{question:"Hey...I'm Greg the Lamp",used:!1,answers:[{text:"Hi, Greg",score:0},{text:"I'm not interested",score:-1},{text:"You look sad, Greg, wanna talk?",score:.5},{text:"Wow, talking lamp, lol",score:-.5}]}].concat(Object(d.a)([{question:"I feel lonely",used:!1,answers:[{text:"Hug",score:1},{text:"Ignore",score:-1},{text:"Everyone's lonely...",score:-.5},{text:"I'm lonely too",score:.5}]},{question:"I feel abused, everyone uses me to get what they want!",used:!1,answers:[{text:"Hug",score:1},{text:"Turn him off",score:-1},{text:"...",score:-.5},{text:"Your are helping people to see things at night or just to feel cozy, you are good lamp",score:1}]},{question:"I don't have any friends, why do other lamps avoid me?",used:!1,answers:[{text:"I'm not a lamp, but we can be friends",score:1},{text:"Nobody wanna be a friend with you, you are just an old lamp",score:-2},{text:"Start looking for another lamp",score:-1},{text:"Tell me more about other lamps, why do think so?",score:.5}]}].map((function(e){return{value:e,sort:Math.random()}})).sort((function(e,t){return e.sort-t.sort})).map((function(e){return e.value})))),m=s.a.createContext(f);function p(e){e.setGameOver;var t=e.children,n=Object(c.useState)(0),a=Object(u.a)(n,2),s=a[0],r=a[1];return Object(b.jsx)(m.Provider,{value:{currentPhraseIndex:s,setNextPhrase:function(){j[s].used=!0,s===j.length-1?r(0):r(s+1)},getQuestion:function(){var e;return(null===(e=j[s])||void 0===e?void 0:e.question)||"Game over"},getAnswers:function(){var e;return(null===(e=j[s])||void 0===e?void 0:e.answers)||[]}},children:t})}function O(){var e=Object(c.useContext)(l),t=e.score,n=e.setScore,a=Object(c.useContext)(m),s=a.getAnswers,r=a.setNextPhrase,o=function(e){n(t+e),r()};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"debug",children:[Object(b.jsx)("div",{className:"btn btn--stripe",onClick:function(){return o(-1)},children:"minus"}),Object(b.jsx)("div",{className:"btn btn--stripe",onClick:function(){return o(1)},children:"plus"}),Object(b.jsxs)("div",{className:"score",children:["Score: ",t]})]}),Object(b.jsx)("div",{className:"Buttons",children:s().map((function(e){return Object(b.jsx)("div",{className:"btn btn--stripe",onClick:function(){return o(e.score)},children:e.text},e.text)}))})]})}var h=s.a.createContext({});function v(e){var t=e.children,n=e.setAllIsLoaded,a=Object(c.useState)(!1),s=Object(u.a)(a,2),r=s[0],o=s[1],i=Object(c.useState)(!1),l=Object(u.a)(i,2),d=l[0],f=l[1];return Object(c.useEffect)((function(){r&&d&&setTimeout(n(r&&d),1e3)}),[r,d,n]),Object(b.jsx)(h.Provider,{value:{soundLoaded:o,imagesAreLoaded:f},children:t})}var g=n.p+"static/media/lamp.cf80ac2c.png",x=n.p+"static/media/light.59e00472.png",y=n.p+"static/media/medium_light.d3ef943c.png",k=n.p+"static/media/sad_lamp.d083bd5f.png",S=n.p+"static/media/sad_light.91eb97c4.png";n(17);function w(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return Math.random()*(a-n)+n}function P(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return Math.random()*(a-n)+n}function C(){var e=Object(c.useContext)(l).lampState,t=(function(e){var t=Object(c.useRef)(),n=Object(c.useCallback)((function(){clearTimeout(t.current);var c=document.getElementById("lamp");e===a.ok||e===a.happy||e===a.neutral?(null===c||void 0===c||c.style.setProperty("--brightness",w([70,120])+"%"),null===c||void 0===c||c.style.setProperty("--hue",w([0,180])+"deg"),null===c||void 0===c||c.style.setProperty("--saturate",w([70,120])+"%")):(null===c||void 0===c||c.style.setProperty("--hue","0deg"),null===c||void 0===c||c.style.setProperty("--saturate","30%"));var s=[1e3,1e3];switch(e){case a.happy:s=[500,1e3];break;case a.ok:case a.neutral:s=[2e3,5e3]}t.current=setTimeout(n,w(s))}),[e]);Object(c.useEffect)((function(){n()}),[e,n]),t.current}(e),Object(c.useRef)()),n=Object(c.useCallback)((function(){var c=document.body,s=[100,200],r=[1e3,2e3];switch(e){case a.nightmare:s=[100,1500],r=[100,500];break;case a.sad:s=[200,500],r=[1e3,4e3];break;case a.neutral:s=[100,200],r=[5e3,8e3]}clearTimeout(t.current),e!==a.nightmare&&e!==a.sad&&e!==a.neutral||null===c||void 0===c||c.style.setProperty("--opacity","0%"),setTimeout((function(){null===c||void 0===c||c.style.setProperty("--opacity","100%"),t.current=setTimeout((function(){n()}),P(r))}),P(s))}),[e]);Object(c.useEffect)((function(){n(),function(e){var t=document.body;switch(e){case a.happy:case a.ok:case a.neutral:null===t||void 0===t||t.style.setProperty("--bg","#3d3d46");break;case a.sad:null===t||void 0===t||t.style.setProperty("--bg","#1d1d26");break;case a.nightmare:null===t||void 0===t||t.style.setProperty("--bg","#1a1a1d")}}(e)}),[e,n]);var s=Object(c.useContext)(h).imagesAreLoaded,r=Object(c.useState)(0),o=Object(u.a)(r,2),i=o[0],d=o[1],f=function(){d(i+1)};Object(c.useEffect)((function(){10===i&&s&&s(!0)}),[i,s]);return Object(b.jsx)("div",{id:"lamp",children:[a.nightmare,a.sad,a.neutral,a.ok,a.happy].map((function(t){return function(t){var n,c,s;switch(n=e===t?1:0,t){case a.nightmare:c=k,s=S;break;case a.sad:case a.neutral:c=g,s=y;break;case a.ok:case a.happy:s=x,c=g}return Object(b.jsxs)("div",{style:{opacity:n},className:"lamp-container",children:[Object(b.jsx)("img",{className:"img light",src:s,onLoad:f}),Object(b.jsx)("img",{className:"img lamp",src:c,onLoad:f})]},t)}(t)}))})}var N=n(3),I=n(18).default,E=n(19).default,L=n(20).default,T=n(21).default,A=n(22).default,F=n(23).default,G=n(24).default,q={loop:!0,soundEnabled:!0,volume:0};function B(e,t,n){n&&n.fade(n.volume(),0,800)}function H(e){var t=e.gameStarted,n=Object(c.useContext)(l),s=n.score,r=n.lampState,o=Object(c.useContext)(h).soundLoaded,i=Object(N.a)(I,q),d=Object(u.a)(i,2)[1].sound,f=Object(N.a)(E,q),j=Object(u.a)(f,2)[1].sound,m=Object(N.a)(L,q),p=Object(u.a)(m,2)[1].sound,O=Object(N.a)(T,q),v=Object(u.a)(O,2)[1].sound,g=Object(N.a)(A,q),x=Object(u.a)(g,2)[1].sound,y=Object(N.a)(F,{loop:!1,volume:0}),k=Object(u.a)(y,2)[1].sound,S=Object(N.a)(G,{loop:!1,volume:0}),w=Object(u.a)(S,2)[1].sound,P=Object(c.useState)(null),C=Object(u.a)(P,2),H=C[0],M=C[1],Q=Object(c.useRef)(s);return Object(c.useEffect)((function(){"loaded"===(null===p||void 0===p?void 0:p.state())&&"loaded"===(null===v||void 0===v?void 0:v.state())&&"loaded"===(null===d||void 0===d?void 0:d.state())&&"loaded"===(null===j||void 0===j?void 0:j.state())&&"loaded"===(null===x||void 0===x?void 0:x.state())&&(o&&o(!0),p.play(),v.play(),x.play(),d.play(),j.play())}),[o,p,x,d,j,v]),Object(c.useEffect)((function(){t&&M(r)}),[r,t]),Object(c.useEffect)((function(){Q.current!==s&&(Q.current<s?null===k||void 0===k||k.play():null===w||void 0===w||w.play(),Q.current=s)}),[s,w,k]),Object(c.useEffect)((function(){B(0,a.neutral,p),B(0,a.nightmare,d),B(0,a.sad,j),B(0,a.ok,v),B(0,a.happy,x)}),[H,p,x,v,j,d]),Object(b.jsx)(b.Fragment,{})}n(25);function M(){var e=Object(c.useContext)(l),t=(e.score,e.setScore,Object(c.useContext)(m).getQuestion);return Object(b.jsx)("div",{className:"speech-container",children:Object(b.jsx)("div",{className:"speech",children:t()})})}var Q=function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!1),r=Object(u.a)(s,2),o=r[0],d=r[1],f=Object(c.useState)(0),j=Object(u.a)(f,2),m=j[0],h=j[1],g=Object(c.useState)(i(m)),x=Object(u.a)(g,2),y=x[0],k=x[1],S=Object(c.useState)(!1),w=Object(u.a)(S,2),P=w[0],N=w[1];return Object(c.useEffect)((function(){n&&d(!0)}),[n]),Object(c.useEffect)((function(){k(i(m))}),[m]),Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(v,{setAllIsLoaded:N,children:Object(b.jsx)(p,{setGameOver:function(){},children:Object(b.jsxs)(l.Provider,{value:{score:m,setScore:h,lampState:y},children:[Object(b.jsx)(H,{gameStarted:n}),!P&&Object(b.jsx)("button",{className:"loading-btn btn--stripe btn",children:"Loading..."}),Object(b.jsxs)("div",{className:"Game "+y,style:{opacity:P?1:0},children:[Object(b.jsx)("div",{className:"light bg "}),Object(b.jsx)(C,{}),o&&Object(b.jsx)(M,{}),!n&&Object(b.jsx)("button",{className:"btn--stripe start-btn btn",onClick:function(){a(!0)},children:"Play"})]}),o&&Object(b.jsx)(O,{})]})})})})},R=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,29)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};o.a.render(Object(b.jsxs)(s.a.StrictMode,{children:[Object(b.jsx)("link",{href:"https://fonts.googleapis.com/css?family=Baloo+2:400,800",rel:"stylesheet"}),Object(b.jsx)(Q,{})]}),document.getElementById("root")),R()}],[[26,1,2]]]);
//# sourceMappingURL=main.a49cc9ec.chunk.js.map