(this["webpackJsonpunstable-game"]=this["webpackJsonpunstable-game"]||[]).push([[0],[,,,,,,,function(e,t,a){},,,,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){"use strict";a.r(t),t.default=a.p+"1e08c02ffb091b99fb2facf24618c7f8.mp3"},function(e,t,a){"use strict";a.r(t),t.default=a.p+"ed14d2196c6a0a8bf20a14c8c076ddd8.mp3"},function(e,t,a){"use strict";a.r(t),t.default=a.p+"e50d51ee58c6ec04b8cffdb182707bfa.mp3"},function(e,t,a){"use strict";a.r(t),t.default=a.p+"786120ca73fc6fc78ce66d044b9d37d2.mp3"},function(e,t,a){"use strict";a.r(t),t.default=a.p+"de8730f7f67fb59b3387c7dab07f1b00.mp3"},function(e,t,a){"use strict";a.r(t),t.default=a.p+"2547c50ab2ea29129121bb2e92415d91.mp3"},function(e,t,a){"use strict";a.r(t),t.default=a.p+"2ab3acbb7166e282f2465998f93c1c7e.mp3"},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n,c=a(0),s=a.n(c),o=a(8),r=a.n(o),u=(a(14),a(2));a(7),a(15);function i(e){return e>=4.5?n.happy:e>=2.5?n.ok:e>=0?n.neutral:e>=-2.5?n.sad:n.nightmare}!function(e){e.happy="happy",e.ok="ok",e.neutral="neutral",e.sad="sad",e.nightmare="nightmare"}(n||(n={}));var l=s.a.createContext({score:0,lampState:n.neutral,setScore:function(){}}),d=a(9),b=a(1),f={currentPhraseIndex:0,setNextPhrase:function(){},getQuestion:function(){return"string"},getAnswers:function(){return[]}},j=[{question:"Hey...I'm Greg the Lamp",used:!1,answers:[{text:"Hi, Greg",score:0},{text:"I'm not interested",score:-1},{text:"You look sad, Greg, wanna talk?",score:.5},{text:"Wow, talking lamp, lol",score:-.5}]}].concat(Object(d.a)([{question:"I feel lonely",used:!1,answers:[{text:"Hug",score:1},{text:"Ignore",score:-1},{text:"Everyone's lonely...",score:-.5},{text:"I'm lonely too",score:.5}]},{question:"I feel abused, everyone uses me to get what they want!",used:!1,answers:[{text:"Hug",score:1},{text:"Turn him off",score:-1},{text:"...",score:-.5},{text:"Your are helping people to see things at night or just to feel cozy, you are good lamp",score:1}]},{question:"I don't have any friends, why do other lamps avoid me?",used:!1,answers:[{text:"I'm not a lamp, but we can be friends",score:1},{text:"Nobody wanna be a friend with you, you are just an old lamp",score:-2},{text:"Start looking for another lamp",score:-1},{text:"Tell me more about other lamps, why do think so?",score:.5}]}].map((function(e){return{value:e,sort:Math.random()}})).sort((function(e,t){return e.sort-t.sort})).map((function(e){return e.value})))),m=s.a.createContext(f);function p(e){e.setGameOver;var t=e.children,a=Object(c.useState)(0),n=Object(u.a)(a,2),s=n[0],o=n[1];return Object(b.jsx)(m.Provider,{value:{currentPhraseIndex:s,setNextPhrase:function(){j[s].used=!0,s===j.length-1?o(0):o(s+1)},getQuestion:function(){var e;return(null===(e=j[s])||void 0===e?void 0:e.question)||"Game over"},getAnswers:function(){var e;return(null===(e=j[s])||void 0===e?void 0:e.answers)||[]}},children:t})}function O(){var e=Object(c.useContext)(l),t=e.score,a=e.setScore,n=Object(c.useContext)(m),s=n.getAnswers,o=n.setNextPhrase;return Object(b.jsxs)("div",{className:"Buttons",children:[Object(b.jsxs)("div",{className:"score",children:["Score: ",t]}),s().map((function(e){return Object(b.jsx)("div",{className:"btn btn--stripe",onClick:function(){return n=e.score,a(t+n),void o();var n},children:e.text},e.text)}))]})}var h=s.a.createContext({});function v(e){var t=e.children,a=e.setAllIsLoaded,n=Object(c.useState)(!1),s=Object(u.a)(n,2),o=s[0],r=s[1],i=Object(c.useState)(!1),l=Object(u.a)(i,2),d=l[0],f=l[1];return Object(c.useEffect)((function(){o&&d&&setTimeout(a(o&&d),1e3)}),[o,d,a]),Object(b.jsx)(h.Provider,{value:{soundLoaded:r,imagesAreLoaded:f},children:t})}var g=a.p+"static/media/lamp.cf80ac2c.png",y=a.p+"static/media/light.59e00472.png",x=a.p+"static/media/medium_light.d3ef943c.png",k=a.p+"static/media/sad_lamp.d083bd5f.png",S=a.p+"static/media/sad_light.91eb97c4.png",w=(a(17),"lamp");function P(e){var t=Object(u.a)(e,2),a=t[0],n=t[1];return Math.random()*(n-a)+a}function C(){var e=Object(c.useContext)(l).lampState,t=Object(c.useRef)(),a=Object(c.useRef)(),s=Object(c.useCallback)((function(){var t=document.body,c=[100,200],o=[1e3,2e3];switch(e){case n.nightmare:c=[100,1500],o=[100,500];break;case n.sad:c=[200,500],o=[1e3,4e3];break;case n.neutral:c=[100,200],o=[5e3,8e3]}clearTimeout(a.current),e!==n.nightmare&&e!==n.sad&&e!==n.neutral||null===t||void 0===t||t.style.setProperty("--opacity-filter","0%"),setTimeout((function(){null===t||void 0===t||t.style.setProperty("--opacity-filter","100%"),a.current=setTimeout((function(){s()}),P(o))}),P(c))}),[e]),o=Object(c.useCallback)((function(){clearTimeout(t.current);var a=document.getElementById(w);e===n.ok||e===n.happy||e===n.neutral?(null===a||void 0===a||a.style.setProperty("--brightness",P([70,120])+"%"),null===a||void 0===a||a.style.setProperty("--hue",P([0,180])+"deg"),null===a||void 0===a||a.style.setProperty("--saturate",P([70,120])+"%")):(null===a||void 0===a||a.style.setProperty("--hue","0deg"),null===a||void 0===a||a.style.setProperty("--saturate","30%"));var c=[1e3,1e3];switch(e){case n.happy:c=[500,1e3];break;case n.ok:case n.neutral:c=[2e3,5e3]}t.current=setTimeout(o,P(c))}),[e]);Object(c.useEffect)((function(){o(),s(),function(e){var t=document.body;switch(e){case n.happy:case n.ok:case n.neutral:null===t||void 0===t||t.style.setProperty("--bg","#3d3d46");break;case n.sad:null===t||void 0===t||t.style.setProperty("--bg","#1d1d26");break;case n.nightmare:null===t||void 0===t||t.style.setProperty("--bg","#1a1a1d")}}(e)}),[e,o,s]);var r=Object(c.useContext)(h).imagesAreLoaded,i=Object(c.useState)(0),d=Object(u.a)(i,2),f=d[0],j=d[1],m=function(){j(f+1),4===f&&r&&r(!0)};return Object(b.jsxs)("div",{id:w,children:[Object(b.jsx)("img",{className:"img light",style:{opacity:e===n.happy||e===n.ok?void 0:0},src:y,onLoad:m}),Object(b.jsx)("img",{className:"img light",style:{opacity:e===n.neutral||e===n.sad?void 0:0},src:x,onLoad:m}),Object(b.jsx)("img",{className:"img lamp",style:{opacity:e!==n.nightmare?1:0},src:g,onLoad:m}),Object(b.jsx)("img",{className:"img light",style:{opacity:e===n.nightmare?void 0:0},src:S,onLoad:m}),Object(b.jsx)("img",{className:"img lamp",style:{opacity:e===n.nightmare?1:0},src:k,onLoad:m})]})}var N=a(3),I=a(18).default,L=a(19).default,E=a(20).default,T=a(21).default,A=a(22).default,G=a(23).default,F=a(24).default,q=.35,B={loop:!0,soundEnabled:!0,volume:0};function H(e,t,a){a&&(e===t?a.fade(a.volume(),q,800):a.fade(a.volume(),0,800))}function M(e){var t=e.gameStarted,a=Object(c.useContext)(l),s=a.score,o=a.lampState,r=Object(c.useContext)(h).soundLoaded,i=Object(N.a)(I,B),d=Object(u.a)(i,2)[1].sound,f=Object(N.a)(L,B),j=Object(u.a)(f,2)[1].sound,m=Object(N.a)(E,B),p=Object(u.a)(m,2)[1].sound,O=Object(N.a)(T,B),v=Object(u.a)(O,2)[1].sound,g=Object(N.a)(A,B),y=Object(u.a)(g,2)[1].sound,x=Object(N.a)(G,{loop:!1,volume:q}),k=Object(u.a)(x,2)[1].sound,S=Object(N.a)(F,{loop:!1,volume:q}),w=Object(u.a)(S,2)[1].sound,P=Object(c.useState)(null),C=Object(u.a)(P,2),M=C[0],Q=C[1],R=Object(c.useRef)(s);return Object(c.useEffect)((function(){"loaded"===(null===p||void 0===p?void 0:p.state())&&"loaded"===(null===v||void 0===v?void 0:v.state())&&"loaded"===(null===d||void 0===d?void 0:d.state())&&"loaded"===(null===j||void 0===j?void 0:j.state())&&"loaded"===(null===y||void 0===y?void 0:y.state())&&(r&&r(!0),p.play(),v.play(),y.play(),d.play(),j.play())}),[r,p,y,d,j,v]),Object(c.useEffect)((function(){t&&Q(o)}),[o,t]),Object(c.useEffect)((function(){console.log(R.current,s),R.current!==s&&(R.current<s?null===k||void 0===k||k.play():null===w||void 0===w||w.play(),R.current=s)}),[s,w,k]),Object(c.useEffect)((function(){H(M,n.neutral,p),H(M,n.nightmare,d),H(M,n.sad,j),H(M,n.ok,v),H(M,n.happy,y)}),[M,p,y,v,j,d]),Object(b.jsx)(b.Fragment,{})}a(25);function Q(){var e=Object(c.useContext)(l),t=(e.score,e.setScore,Object(c.useContext)(m).getQuestion);return Object(b.jsx)("div",{className:"speech-container",children:Object(b.jsx)("div",{className:"speech",children:t()})})}var R=function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(!1),o=Object(u.a)(s,2),r=o[0],d=o[1],f=Object(c.useState)(0),j=Object(u.a)(f,2),m=j[0],h=j[1],g=Object(c.useState)(i(m)),y=Object(u.a)(g,2),x=y[0],k=y[1],S=Object(c.useState)(!1),w=Object(u.a)(S,2),P=w[0],N=w[1];return Object(c.useEffect)((function(){a&&d(!0)}),[a]),Object(c.useEffect)((function(){k(i(m))}),[m]),Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(v,{setAllIsLoaded:N,children:Object(b.jsx)(p,{setGameOver:function(){},children:Object(b.jsxs)(l.Provider,{value:{score:m,setScore:h,lampState:x},children:[Object(b.jsx)(M,{gameStarted:a}),!P&&Object(b.jsx)("button",{className:"loading-btn btn--stripe btn",children:"Loading..."}),Object(b.jsxs)("div",{className:"Game",style:{opacity:P?1:0},children:[Object(b.jsx)("div",{className:"light bg "+x}),Object(b.jsx)(C,{}),r&&Object(b.jsx)(Q,{}),!a&&Object(b.jsx)("button",{className:"btn--stripe start-btn btn",onClick:function(){n(!0)},children:"Play"})]}),r&&Object(b.jsx)(O,{})]})})})})},_=function(e){e&&e instanceof Function&&a.e(4).then(a.bind(null,29)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,o=t.getTTFB;a(e),n(e),c(e),s(e),o(e)}))};r.a.render(Object(b.jsxs)(s.a.StrictMode,{children:[Object(b.jsx)("link",{href:"https://fonts.googleapis.com/css?family=Baloo+2:400,800",rel:"stylesheet"}),Object(b.jsx)(R,{})]}),document.getElementById("root")),_()}],[[26,1,2]]]);
//# sourceMappingURL=main.2c52c77e.chunk.js.map